<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WE MAKE NOISE</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
        }

        h1 {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 2rem;
            text-align: center;
        }

        .button {
            border: 1px solid white;
            border-radius: 50px;
            padding: 10px 20px;
            background: none;
            color: white;
            font-size: 1rem;
            text-transform: uppercase;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .button:hover {
            background: white;
            color: black;
        }

        .sliders {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .slider-container {
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slider-label {
            margin-right: 10px;
        }

        .slider {
            width: 300px;
        }

        .footer {
            position: absolute;
            bottom: 20px;
            text-align: center;
            font-size: 0.75rem;
        }

        .footer a {
            color: white;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>WE MAKE NOISE. NOT MUSIC</h1>
    <button class="button" onclick="toggleNoise()">MAKE NOISE</button>

    <div class="sliders">
        <div class="slider-container">
            <label for="volume" class="slider-label">VOLUME</label>
            <input type="range" id="volume" class="slider" min="0" max="100" value="50">
        </div>
        <div class="slider-container">
            <label for="pitch" class="slider-label">PITCH</label>
            <input type="range" id="pitch" class="slider" min="0" max="100" value="50">
        </div>
        <div class="slider-container">
            <label for="speed" class="slider-label">SPEED</label>
            <input type="range" id="speed" class="slider" min="0" max="100" value="50">
        </div>
        <div class="slider-container">
            <label for="granularity" class="slider-label">GRANULARITY</label>
            <input type="range" id="granularity" class="slider" min="0" max="100" value="50">
            <button class="button" onclick="toggleRandomGranularity()" style="margin-left: 10px;">SMOOTH</button>
        </div>
        <div class="slider-container">
            <label for="high" class="slider-label">HIGH</label>
            <input type="range" id="high" class="slider" min="0" max="100" value="50">
        </div>
        <div class="slider-container">
            <label for="mid" class="slider-label">MID</label>
            <input type="range" id="mid" class="slider" min="0" max="100" value="50">
        </div>
        <div class="slider-container">
            <label for="low" class="slider-label">LOW</label>
            <input type="range" id="low" class="slider" min="0" max="100" value="50">
        </div>
    </div>

    <div class="footer">
        <p>Created by member420 / kurbloris</p>
        <a href="https://kurbloris.bandcamp.com" target="_blank">Bandcamp</a>
        <a href="https://github.com/wemakenoise" target="_blank">GitHub</a>
    </div>

    <script>
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
        let oscillator;
        let gainNode;
        let isPlaying = false;
        let randomGranularityInterval;

        const highShelf = audioContext.createBiquadFilter();
        highShelf.type = "highshelf";
        highShelf.frequency.value = 3000;

        const midPeaking = audioContext.createBiquadFilter();
        midPeaking.type = "peaking";
        midPeaking.frequency.value = 1000;
        midPeaking.Q.value = 1;

        const lowShelf = audioContext.createBiquadFilter();
        lowShelf.type = "lowshelf";
        lowShelf.frequency.value = 250;

        function toggleNoise() {
            if (isPlaying) {
                stopNoise();
            } else {
                makeNoise();
            }
        }

        function makeNoise() {
            oscillator = audioContext.createOscillator();
            gainNode = audioContext.createGain();

            const volumeControl = document.getElementById('volume');
            const pitchControl = document.getElementById('pitch');
            const speedControl = document.getElementById('speed');
            const granularityControl = document.getElementById('granularity');
            const highControl = document.getElementById('high');
            const midControl = document.getElementById('mid');
            const lowControl = document.getElementById('low');

            volumeControl.addEventListener('input', () => {
                gainNode.gain.value = volumeControl.value / 100;
            });

            pitchControl.addEventListener('input', () => {
                oscillator.frequency.value = pitchControl.value * 10;
            });

            speedControl.addEventListener('input', () => {
                oscillator.detune.value = speedControl.value * 10;
            });

            granularityControl.addEventListener('input', () => {
                if (!randomGranularityInterval) {
                    oscillator.frequency.value += Math.random() * granularityControl.value - granularityControl.value / 2;
                }
            });

            highControl.addEventListener('input', () => {
                highShelf.gain.value = highControl.value - 50;
            });

            midControl.addEventListener('input', () => {
                midPeaking.gain.value = midControl.value - 50;
            });

            lowControl.addEventListener('input', () => {
                lowShelf.gain.value = lowControl.value - 50;
            });

            oscillator.type = 'square';
            oscillator.frequency.value = pitchControl.value * 10;
            gainNode.gain.value = volumeControl.value / 100;

            oscillator.connect(lowShelf)
                     .connect(midPeaking)
                     .connect(highShelf)
                     .connect(gainNode)
                     .connect(audioContext.destination);
            oscillator.start();

            isPlaying = true;
            document.querySelector('.button').textContent = 'STOP NOISE';
        }

        function stopNoise() {
            if (oscillator) {
                oscillator.stop();
                oscillator.disconnect();
            }
            if (gainNode) {
                gainNode.disconnect();
            }

            clearInterval(randomGranularityInterval);
            randomGranularityInterval = null;

            isPlaying = false;
            document.querySelector('.button').textContent = 'MAKE NOISE';
        }

        function toggleRandomGranularity() {
            const granularityControl = document.getElementById('granularity');

            if (randomGranularityInterval) {
                clearInterval(randomGranularityInterval);
                randomGranularityInterval = null;
                granularityControl.disabled = false;
            } else {
                granularityControl.disabled = true;
                let phase = 0;

                randomGranularityInterval = setInterval(() => {
                    const randomValue = Math.sin(phase) * 50 + 50;
                    granularityControl.value = randomValue;
                    oscillator.frequency.value += Math.random() * randomValue - randomValue / 2;
                    phase += 0.1;
                }, 50);
            }
        }
    </script>
</body>
</html>
